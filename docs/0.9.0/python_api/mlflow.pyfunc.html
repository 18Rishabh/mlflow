
  

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mlflow.pyfunc &mdash; MLflow 0.9.0 documentation</title>
  
   
  <link rel="canonical" href="https://www.mlflow.org/docs/latest/python_api/mlflow.pyfunc.html">
  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    

    

  
    
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-WXWDBL');</script>
      

  

  
  
    

  

  
  
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    
    <link rel="stylesheet" href="../_static/css/algolia.css" type="text/css" />
    
  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MLflow 0.9.0 documentation" href="../index.html"/>
        <link rel="up" title="Python API" href="index.html"/>
        <link rel="next" title="mlflow.pytorch" href="/mlflow.pytorch.html"/>
        <link rel="prev" title="mlflow.projects" href="/mlflow.projects.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  

  
  <nav class="wy-nav-top header" role="navigation" aria-label="top navigation">
    <ul>
  <li class="menu-toggle">
    <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
    <a href="../index.html" class="wy-nav-top-logo"><img src="../_static/MLflow-logo-final-black.png" alt="MLFlow" /></a> <span class="version">0.9.0</span>
  </li>
</ul>
  </nav>
  <page>
    

    <nav data-toggle="wy-nav-shift" class="wy-nav-side relative">
      <div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    
<div role="search">
  
  <input id="algolia-search" type="text" name="q" placeholder="Search" />
  
</div>


    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home"><img src="../_static/icons/nav-home.svg"> MLflow</a>
    

    
      

      
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tracking.html">MLflow Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects.html">MLflow Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">MLflow Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command-Line Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mlflow.html">mlflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.azureml.html">mlflow.azureml</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.entities.html">mlflow.entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.h2o.html">mlflow.h2o</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.keras.html">mlflow.keras</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.mleap.html">mlflow.mleap</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.models.html">mlflow.models</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.projects.html">mlflow.projects</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">mlflow.pyfunc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#filesystem-format">Filesystem format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mlmodel-configuration">MLModel configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#inference-api">Inference API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-custom-pyfunc-models">Creating custom Pyfunc models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#workflows">Workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#which-workflow-is-right-for-my-use-case">Which workflow is right for my use case?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pytorch.html">mlflow.pytorch</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.sagemaker.html">mlflow.sagemaker</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.sklearn.html">mlflow.sklearn</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.spark.html">mlflow.spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.tensorflow.html">mlflow.tensorflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.tracking.html">mlflow.tracking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../R-api.html">R API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java_api/index.html">Java API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest-api.html">REST API</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    

    <p>
      <a id='feedbacklink' href="https://github.com/mlflow/mlflow/blob/master/CONTRIBUTING.rst" target="_blank">Contribute</a>
    </p>
  </div>
</div>
    </nav>

    <main class="wy-grid-for-nav">
      <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
        <div class="wy-nav-content">
          <div class="rst-content">
            










<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
        <li><a href="index.html">Python API</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>mlflow.pyfunc</li>
    
    
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/databricks/mlflow/blob/master/docs/source/python_api/mlflow.pyfunc.rst" class="fa fa-github"> Edit on GitHub</a>
    </li>
    
  </ul>
</div>
            <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
              <div itemprop="articleBody">
                
  <div class="section" id="module-mlflow.pyfunc">
<span id="mlflow-pyfunc"></span><h1>mlflow.pyfunc<a class="headerlink" href="#module-mlflow.pyfunc" title="Permalink to this headline"> </a></h1>
<p>The <code class="docutils literal"><span class="pre">mlflow.pyfunc</span></code> module defines a generic <a class="reference internal" href="#pyfunc-filesystem-format"><span class="std std-ref">filesystem format</span></a>
for Python models and provides utilities for saving to and loading from this format. The format is
self contained in the sense that it includes all necessary information for anyone to load it and
use it. Dependencies are either stored directly with the model or referenced via a Conda
environment.</p>
<p>The <code class="docutils literal"><span class="pre">mlflow.pyfunc</span></code> module also defines utilities for creating custom <code class="docutils literal"><span class="pre">pyfunc</span></code> models
using frameworks and inference logic that may not be natively included in MLflow. See
<a class="reference internal" href="#pyfunc-create-custom"><span class="std std-ref">Creating custom Pyfunc models</span></a>.</p>
<div class="section" id="filesystem-format">
<span id="pyfunc-filesystem-format"></span><h2>Filesystem format<a class="headerlink" href="#filesystem-format" title="Permalink to this headline"> </a></h2>
<p>The Pyfunc format is defined as a directory structure containing all required data, code, and
configuration:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">dst</span><span class="o">-</span><span class="n">path</span><span class="o">/</span>
    <span class="o">./</span><span class="n">MLmodel</span><span class="p">:</span> <span class="n">configuration</span>
    <span class="o">&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">code</span> <span class="n">packaged</span> <span class="k">with</span> <span class="n">the</span> <span class="n">model</span> <span class="p">(</span><span class="n">specified</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">MLmodel</span> <span class="n">file</span><span class="p">)</span>
    <span class="o">&lt;</span><span class="n">data</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">data</span> <span class="n">packaged</span> <span class="k">with</span> <span class="n">the</span> <span class="n">model</span> <span class="p">(</span><span class="n">specified</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">MLmodel</span> <span class="n">file</span><span class="p">)</span>
    <span class="o">&lt;</span><span class="n">env</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">Conda</span> <span class="n">environment</span> <span class="n">definition</span> <span class="p">(</span><span class="n">specified</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">MLmodel</span> <span class="n">file</span><span class="p">)</span>
</pre></div>
</div>
<p>The directory structure may contain additional contents that can be referenced by the <code class="docutils literal"><span class="pre">MLmodel</span></code>
configuration.</p>
<div class="section" id="mlmodel-configuration">
<span id="pyfunc-model-config"></span><h3>MLModel configuration<a class="headerlink" href="#mlmodel-configuration" title="Permalink to this headline"> </a></h3>
<p>A Python model contains an <code class="docutils literal"><span class="pre">MLmodel</span></code> file in <strong>python_function</strong> format in its root with the
following parameters:</p>
<ul>
<li><dl class="first docutils">
<dt>loader_module [required]:</dt>
<dd><p class="first">Python module that can load the model. Expected as module identifier
e.g. <code class="docutils literal"><span class="pre">mlflow.sklearn</span></code>, it will be imported via <code class="docutils literal"><span class="pre">importlib.import_module</span></code>.
The imported module must contain function with the following signature:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">_load_pyfunc</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">string</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">&lt;</span><span class="n">pyfunc</span> <span class="n">model</span><span class="o">&gt;</span>
</pre></div>
</div>
<p class="last">The path argument is specified by the <code class="docutils literal"><span class="pre">data</span></code> parameter and may refer to a file or
directory.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>code [optional]:</dt>
<dd><p class="first last">Relative path to a directory containing the code packaged with this model.
All files and directories inside this directory are added to the Python path
prior to importing the model loader.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>data [optional]:</dt>
<dd><p class="first last">Relative path to a file or directory containing model data.
The path is passed to the model loader.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>env [optional]:</dt>
<dd><p class="first last">Relative path to an exported Conda environment. If present this environment
should be activated prior to running the model.</p>
</dd>
</dl>
</li>
<li><p class="first">Optionally, any additional parameters necessary for interpreting the serialized model in
<code class="docutils literal"><span class="pre">pyfunc</span></code> format.</p>
</li>
</ul>
<p class="rubric">Example</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="n">example</span><span class="o">/</span><span class="n">sklearn_iris</span><span class="o">/</span><span class="n">mlruns</span><span class="o">/</span><span class="n">run1</span><span class="o">/</span><span class="n">outputs</span><span class="o">/</span><span class="n">linear</span><span class="o">-</span><span class="n">lr</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>├── MLmodel
├── code
│   ├── sklearn_iris.py
│
├── data
│   └── model.pkl
└── mlflow_env.yml
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span> <span class="n">example</span><span class="o">/</span><span class="n">sklearn_iris</span><span class="o">/</span><span class="n">mlruns</span><span class="o">/</span><span class="n">run1</span><span class="o">/</span><span class="n">outputs</span><span class="o">/</span><span class="n">linear</span><span class="o">-</span><span class="n">lr</span><span class="o">/</span><span class="n">MLmodel</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python_function</span><span class="p">:</span>
  <span class="n">code</span><span class="p">:</span> <span class="n">code</span>
  <span class="n">data</span><span class="p">:</span> <span class="n">data</span><span class="o">/</span><span class="n">model</span><span class="o">.</span><span class="n">pkl</span>
  <span class="n">loader_module</span><span class="p">:</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">sklearn</span>
  <span class="n">env</span><span class="p">:</span> <span class="n">mlflow_env</span><span class="o">.</span><span class="n">yml</span>
  <span class="n">main</span><span class="p">:</span> <span class="n">sklearn_iris</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="inference-api">
<span id="pyfunc-inference-api"></span><h2>Inference API<a class="headerlink" href="#inference-api" title="Permalink to this headline"> </a></h2>
<p>The convention for pyfunc models is to have a <code class="docutils literal"><span class="pre">predict</span></code> method or function with the following
signature:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">predict</span><span class="p">(</span><span class="n">model_input</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">|</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span> <span class="o">|</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]</span>
</pre></div>
</div>
<p>This convention is relied on by other MLflow components.</p>
</div>
<div class="section" id="creating-custom-pyfunc-models">
<span id="pyfunc-create-custom"></span><h2>Creating custom Pyfunc models<a class="headerlink" href="#creating-custom-pyfunc-models" title="Permalink to this headline"> </a></h2>
<p>MLflow’s persistence modules provide convenience functions for creating models with the
<code class="docutils literal"><span class="pre">pyfunc</span></code> flavor in a variety of machine learning frameworks (scikit-learn, Keras, Pytorch, and
more); however, they do not cover every use case. For example, you may want to create an MLflow
model with the <code class="docutils literal"><span class="pre">pyfunc</span></code> flavor using a framework that MLflow does not natively support.
Alternatively, you may want to build an MLflow model that executes custom logic when evaluating
queries, such as preprocessing and postprocessing routines. Therefore, <code class="docutils literal"><span class="pre">mlflow.pyfunc</span></code>
provides utilities for creating <code class="docutils literal"><span class="pre">pyfunc</span></code> models from arbitrary code and model data.</p>
<p>The <a class="reference internal" href="#mlflow.pyfunc.save_model" title="mlflow.pyfunc.save_model"><code class="xref py py-meth docutils literal"><span class="pre">save_model()</span></code></a> and <a class="reference internal" href="#mlflow.pyfunc.log_model" title="mlflow.pyfunc.log_model"><code class="xref py py-meth docutils literal"><span class="pre">log_model()</span></code></a> methods are designed to support multiple workflows
for creating custom <code class="docutils literal"><span class="pre">pyfunc</span></code> models that incorporate custom inference logic and artifacts
that the logic may require.</p>
<p>An <cite>artifact</cite> is a file or directory, such as a serialized model or a CSV. For example, a
serialized TensorFlow graph is an artifact. An MLflow model directory is also an artifact.</p>
<div class="section" id="workflows">
<span id="pyfunc-create-custom-workflows"></span><h3>Workflows<a class="headerlink" href="#workflows" title="Permalink to this headline"> </a></h3>
<p><a class="reference internal" href="#mlflow.pyfunc.save_model" title="mlflow.pyfunc.save_model"><code class="xref py py-meth docutils literal"><span class="pre">save_model()</span></code></a> and <a class="reference internal" href="#mlflow.pyfunc.log_model" title="mlflow.pyfunc.log_model"><code class="xref py py-meth docutils literal"><span class="pre">log_model()</span></code></a> support the following workflows:</p>
<ol class="arabic">
<li><p class="first">Programmatically defining a new MLflow model, including its attributes and artifacts.</p>
<p>Given a set of artifact URIs, <a class="reference internal" href="#mlflow.pyfunc.save_model" title="mlflow.pyfunc.save_model"><code class="xref py py-meth docutils literal"><span class="pre">save_model()</span></code></a> and <a class="reference internal" href="#mlflow.pyfunc.log_model" title="mlflow.pyfunc.log_model"><code class="xref py py-meth docutils literal"><span class="pre">log_model()</span></code></a> can
automatically download artifacts from their URIs and create an MLflow model directory.</p>
<p>In this case, you must define a Python class which inherits from <a class="reference internal" href="#mlflow.pyfunc.PythonModel" title="mlflow.pyfunc.PythonModel"><code class="xref py py-class docutils literal"><span class="pre">PythonModel</span></code></a>,
defining <code class="docutils literal"><span class="pre">predict()</span></code> and, optionally, <code class="docutils literal"><span class="pre">load_context()</span></code>. An instance of this class is
specified via the <code class="docutils literal"><span class="pre">python_model</span></code> parameter; it is automatically serialized and deserialized
as a Python class, including all of its attributes.</p>
</li>
<li><p class="first">Interpreting pre-existing data as an MLflow model.</p>
<p>If you already have a directory containing model data, <a class="reference internal" href="#mlflow.pyfunc.save_model" title="mlflow.pyfunc.save_model"><code class="xref py py-meth docutils literal"><span class="pre">save_model()</span></code></a> and
<a class="reference internal" href="#mlflow.pyfunc.log_model" title="mlflow.pyfunc.log_model"><code class="xref py py-meth docutils literal"><span class="pre">log_model()</span></code></a> can import the data as an MLflow model. The <code class="docutils literal"><span class="pre">data_path</span></code> parameter
specifies the local filesystem path to the directory containing model data.</p>
<p>In this case, you must provide a Python module, called a <cite>loader module</cite>. The
loader module defines a <code class="docutils literal"><span class="pre">_load_pyfunc()</span></code> method that performs the following tasks:</p>
<ul class="simple">
<li>Load data from the specified <code class="docutils literal"><span class="pre">data_path</span></code>. For example, this process may include
deserializing pickled Python objects or models or parsing CSV files.</li>
<li>Construct and return a pyfunc-compatible model wrapper. As in the first
use case, this wrapper must define a <code class="docutils literal"><span class="pre">predict()</span></code> method that is used to evaluate
queries. <code class="docutils literal"><span class="pre">predict()</span></code> must adhere to the <a class="reference internal" href="#pyfunc-inference-api"><span class="std std-ref">Inference API</span></a>.</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">loader_module</span></code> parameter specifies the name of your loader module.</p>
<p>For an example loader module implementation, refer to the <a class="reference external" href="https://github.com/mlflow/mlflow/blob/74d75109aaf2975f5026104d6125bb30f4e3f744/mlflow/keras.py#L157-L187">loader module
implementation in mlflow.keras</a>.</p>
</li>
</ol>
</div>
<div class="section" id="which-workflow-is-right-for-my-use-case">
<span id="pyfunc-create-custom-selecting-workflow"></span><h3>Which workflow is right for my use case?<a class="headerlink" href="#which-workflow-is-right-for-my-use-case" title="Permalink to this headline"> </a></h3>
<p>We consider the first workflow to be more user-friendly and generally recommend it for the
following reasons:</p>
<ul class="simple">
<li>It automatically resolves and collects specified model artifacts.</li>
<li>It automatically serializes and deserializes the <code class="docutils literal"><span class="pre">python_model</span></code> instance and all of
its attributes, reducing the amount of user logic that is required to load the model</li>
<li>You can create Models using logic that is defined in the <code class="docutils literal"><span class="pre">__main__</span></code> scope. This allows
custom models to be constructed in interactive environments, such as notebooks and the Python
REPL.</li>
</ul>
<p>You may prefer the second, lower-level workflow for the following reasons:</p>
<ul class="simple">
<li>Inference logic is always persisted as code, rather than a Python object. This makes logic
easier to inspect and modify later.</li>
<li>If the user has already collected all of their model data in a single location, the second
workflow allows it to be saved in MLflow format directly, without enumerating constituent
artifacts.</li>
</ul>
<dl class="function">
<dt id="mlflow.pyfunc.add_to_model">
<code class="descclassname">mlflow.pyfunc.</code><code class="descname">add_to_model</code><span class="sig-paren">(</span><em>model</em>, <em>loader_module</em>, <em>data=None</em>, <em>code=None</em>, <em>env=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.pyfunc.add_to_model" title="Permalink to this definition"> </a></dt>
<dd><p>Add a <code class="docutils literal"><span class="pre">pyfunc</span></code> spec to the model configuration.</p>
<p>Defines <code class="docutils literal"><span class="pre">pyfunc</span></code> configuration schema. Caller can use this to create a valid <code class="docutils literal"><span class="pre">pyfunc</span></code> model
flavor out of an existing directory structure. For example, other model flavors can use this to
specify how to use their output as a <code class="docutils literal"><span class="pre">pyfunc</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All paths are relative to the exported model root directory.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> – Existing model.</li>
<li><strong>loader_module</strong> – The module to be used to load the model.</li>
<li><strong>data</strong> – Path to the model data.</li>
<li><strong>code</strong> – Path to the code dependencies.</li>
<li><strong>env</strong> – Conda environment.</li>
<li><strong>kwargs</strong> – Additional key-value pairs to include in the <code class="docutils literal"><span class="pre">pyfunc</span></code> flavor specification.
Values must be YAML-serializable.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Updated model configuration.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mlflow.pyfunc.get_module_loader_src">
<code class="descclassname">mlflow.pyfunc.</code><code class="descname">get_module_loader_src</code><span class="sig-paren">(</span><em>src_path</em>, <em>dst_path</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.pyfunc.get_module_loader_src" title="Permalink to this definition"> </a></dt>
<dd><p>Generate Python source of the model loader.</p>
<p>Model loader contains <code class="docutils literal"><span class="pre">load_pyfunc</span></code> method with no parameters. It hardcodes model
loading of the given model into a Python source. This is done so that the exported model has no
unnecessary dependencies on MLflow or any other configuration file format or parsing library.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>src_path</strong> – Current path to the model.</li>
<li><strong>dst_path</strong> – Relative or absolute path where the model will be stored in the deployment
environment.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Python source code of the model loader as string.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mlflow.pyfunc.load_pyfunc">
<code class="descclassname">mlflow.pyfunc.</code><code class="descname">load_pyfunc</code><span class="sig-paren">(</span><em>path</em>, <em>run_id=None</em>, <em>suppress_warnings=False</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.pyfunc.load_pyfunc" title="Permalink to this definition"> </a></dt>
<dd><p>Load a model stored in Python function format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> – Path to the model.</li>
<li><strong>run_id</strong> – MLflow run ID.</li>
<li><strong>suppress_warnings</strong> – If True, non-fatal warning messages associated with the model
loading process will be suppressed. If False, these warning messages
will be emitted.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mlflow.pyfunc.log_model">
<code class="descclassname">mlflow.pyfunc.</code><code class="descname">log_model</code><span class="sig-paren">(</span><em>artifact_path</em>, <em>loader_module=None</em>, <em>data_path=None</em>, <em>code_path=None</em>, <em>conda_env=None</em>, <em>python_model=None</em>, <em>artifacts=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.pyfunc.log_model" title="Permalink to this definition"> </a></dt>
<dd><p>Create a custom Pyfunc model, incorporating custom inference logic and data dependencies.</p>
<p>For information about the workflows that this method supports, see <a class="reference internal" href="#pyfunc-create-custom-workflows"><span class="std std-ref">Workflows for
creating custom pyfunc models</span></a> and
<a class="reference internal" href="#pyfunc-create-custom-selecting-workflow"><span class="std std-ref">Which workflow is right for my use case?</span></a>.
You cannot specify the parameters for the first workflow: <code class="docutils literal"><span class="pre">loader_module</span></code>, <code class="docutils literal"><span class="pre">data_path</span></code>
and the parameters for the second workflow: <code class="docutils literal"><span class="pre">python_model</span></code>, <code class="docutils literal"><span class="pre">artifacts</span></code> together.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>artifact_path</strong> – The run-relative artifact path to which to log the Python model.</li>
<li><strong>loader_module</strong> – <p>The name of the Python module that will be used to load the model
from <code class="docutils literal"><span class="pre">data_path</span></code>. This module must define a method with the prototype
<code class="docutils literal"><span class="pre">_load_pyfunc(data_path)</span></code>. If not <em>None</em>, this module and its
dependencies must be included in one of the following locations:</p>
<ul>
<li>The MLflow library.</li>
<li>Package(s) listed in the model’s Conda environment, specified by
the <code class="docutils literal"><span class="pre">conda_env</span></code> parameter.</li>
<li>One or more of the files specified by the <code class="docutils literal"><span class="pre">code_path</span></code> parameter.</li>
</ul>
</li>
<li><strong>data_path</strong> – Path to a file or directory containing model data.</li>
<li><strong>code_path</strong> – A list of local filesystem paths to Python file dependencies (or directories
containing file dependencies). These files will be <em>prepended</em> to the system
path before the model is loaded.</li>
<li><strong>conda_env</strong> – <p>Either a dictionary representation of a Conda environment or the path to a
Conda environment yaml file. This decribes the environment this model should
be run in. If <code class="docutils literal"><span class="pre">python_model</span></code> is not <em>None</em>, the Conda environment must
at least specify the dependencies contained in
<code class="xref py py-data docutils literal"><span class="pre">mlflow.pyfunc.DEFAULT_CONDA_ENV</span></code>. If <cite>None</cite>, the default
<code class="xref py py-data docutils literal"><span class="pre">mlflow.pyfunc.DEFAULT_CONDA_ENV</span></code> environment will be added to the
model. The following is an <em>example</em> dictionary representation of a Conda
environment:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;mlflow-env&#39;</span><span class="p">,</span>
    <span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">],</span>
    <span class="s1">&#39;dependencies&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;python=3.7.0&#39;</span><span class="p">,</span>
        <span class="s1">&#39;cloudpickle==0.5.8&#39;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><strong>python_model</strong> – <p>An instance of a subclass of <a class="reference internal" href="#mlflow.pyfunc.PythonModel" title="mlflow.pyfunc.PythonModel"><code class="xref py py-class docutils literal"><span class="pre">PythonModel</span></code></a>. This class will be
serialized using the CloudPickle library. Any dependencies of the class
should be included in one of the following locations:</p>
<blockquote>
<div><ul>
<li>The MLflow library.</li>
<li>Package(s) listed in the model’s Conda environment, specified by
the <code class="docutils literal"><span class="pre">conda_env</span></code> parameter.</li>
<li>One or more of the files specified by the <code class="docutils literal"><span class="pre">code_path</span></code> parameter.</li>
</ul>
</div></blockquote>
<p>Note: If the class is imported from another module, as opposed to being
defined in the <code class="docutils literal"><span class="pre">__main__</span></code> scope, the defining module should also be
included in one of the listed locations.</p>
</li>
<li><strong>artifacts</strong> – <p>A dictionary containing <code class="docutils literal"><span class="pre">&lt;name,</span> <span class="pre">artifact_uri&gt;</span></code> entries. Remote artifact URIs
will be resolved to absolute filesystem paths, producing a dictionary of
<code class="docutils literal"><span class="pre">&lt;name,</span> <span class="pre">absolute_path&gt;</span></code> entries. <code class="docutils literal"><span class="pre">python_model</span></code> can reference these
resolved entries as the <code class="docutils literal"><span class="pre">artifacts</span></code> property of the <code class="docutils literal"><span class="pre">context</span></code> parameter
in <a class="reference internal" href="#mlflow.pyfunc.PythonModel.load_context" title="mlflow.pyfunc.PythonModel.load_context"><code class="xref py py-func docutils literal"><span class="pre">PythonModel.load_context()</span></code></a>
and <a class="reference internal" href="#mlflow.pyfunc.PythonModel.predict" title="mlflow.pyfunc.PythonModel.predict"><code class="xref py py-func docutils literal"><span class="pre">PythonModel.predict()</span></code></a>.
For example, consider the following <code class="docutils literal"><span class="pre">artifacts</span></code> dictionary:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;my_file&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://my-bucket/path/to/my/file&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case, the <code class="docutils literal"><span class="pre">&quot;my_file&quot;</span></code> artifact will be downloaded from S3. The
<code class="docutils literal"><span class="pre">python_model</span></code> can then refer to <code class="docutils literal"><span class="pre">&quot;my_file&quot;</span></code> as an absolute filesystem
path via <code class="docutils literal"><span class="pre">context.artifacts[&quot;my_file&quot;]</span></code>.</p>
<p>If <em>None</em>, no artifacts will be added to the model.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mlflow.pyfunc.save_model">
<code class="descclassname">mlflow.pyfunc.</code><code class="descname">save_model</code><span class="sig-paren">(</span><em>dst_path</em>, <em>loader_module=None</em>, <em>data_path=None</em>, <em>code_path=None</em>, <em>conda_env=None</em>, <em>model=&lt;mlflow.models.Model object&gt;</em>, <em>python_model=None</em>, <em>artifacts=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.pyfunc.save_model" title="Permalink to this definition"> </a></dt>
<dd><p>Create a custom Pyfunc model, incorporating custom inference logic and data dependencies.</p>
<p>For information about the workflows that this method supports, please see <a class="reference internal" href="#pyfunc-create-custom-workflows"><span class="std std-ref">“workflows for
creating custom pyfunc models”</span></a> and
<a class="reference internal" href="#pyfunc-create-custom-selecting-workflow"><span class="std std-ref">“which workflow is right for my use case?”</span></a>.
Note that the parameters for the first workflow: <code class="docutils literal"><span class="pre">loader_module</span></code>, <code class="docutils literal"><span class="pre">data_path</span></code> and the
parameters for the second workflow: <code class="docutils literal"><span class="pre">python_model</span></code>, <code class="docutils literal"><span class="pre">artifacts</span></code>, cannot be
specified together.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dst_path</strong> – The path to which to save the Python model.</li>
<li><strong>loader_module</strong> – <p>The name of the Python module that will be used to load the model
from <code class="docutils literal"><span class="pre">data_path</span></code>. This module must define a method with the prototype
<code class="docutils literal"><span class="pre">_load_pyfunc(data_path)</span></code>. If not <em>None</em>, this module and its
dependencies must be included in one of the following locations:</p>
<ul>
<li>The MLflow library.</li>
<li>Package(s) listed in the model’s Conda environment, specified by
the <code class="docutils literal"><span class="pre">conda_env</span></code> parameter.</li>
<li>One or more of the files specified by the <code class="docutils literal"><span class="pre">code_path</span></code> parameter.</li>
</ul>
</li>
<li><strong>data_path</strong> – Path to a file or directory containing model data.</li>
<li><strong>code_path</strong> – A list of local filesystem paths to Python file dependencies (or directories
containing file dependencies). These files will be <em>prepended</em> to the system
path before the model is loaded.</li>
<li><strong>conda_env</strong> – <p>Either a dictionary representation of a Conda environment or the path to a
Conda environment yaml file. This decribes the environment this model should
be run in. If <code class="docutils literal"><span class="pre">python_model</span></code> is not <code class="docutils literal"><span class="pre">None</span></code>, the Conda environment must
at least specify the dependencies contained in
<code class="xref py py-data docutils literal"><span class="pre">mlflow.pyfunc.DEFAULT_CONDA_ENV</span></code>. If <cite>None</cite>, the default
<code class="xref py py-data docutils literal"><span class="pre">mlflow.pyfunc.DEFAULT_CONDA_ENV</span></code> environment will be added to the
model. The following is an <em>example</em> dictionary representation of a Conda
environment:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;mlflow-env&#39;</span><span class="p">,</span>
    <span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;defaults&#39;</span><span class="p">],</span>
    <span class="s1">&#39;dependencies&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;python=3.7.0&#39;</span><span class="p">,</span>
        <span class="s1">&#39;cloudpickle==0.5.8&#39;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><strong>python_model</strong> – <p>An instance of a subclass of <a class="reference internal" href="#mlflow.pyfunc.PythonModel" title="mlflow.pyfunc.PythonModel"><code class="xref py py-class docutils literal"><span class="pre">PythonModel</span></code></a>. This class will be
serialized using the CloudPickle library. Any dependencies of the class
should be included in one of the following locations:</p>
<blockquote>
<div><ul>
<li>The MLflow library.</li>
<li>Package(s) listed in the model’s Conda environment, specified by
the <code class="docutils literal"><span class="pre">conda_env</span></code> parameter.</li>
<li>One or more of the files specified by the <code class="docutils literal"><span class="pre">code_path</span></code> parameter.</li>
</ul>
</div></blockquote>
<p>Note: If the class is imported from another module, as opposed to being
defined in the <code class="docutils literal"><span class="pre">__main__</span></code> scope, the defining module should also be
included in one of the listed locations.</p>
</li>
<li><strong>artifacts</strong> – <p>A dictionary containing <code class="docutils literal"><span class="pre">&lt;name,</span> <span class="pre">artifact_uri&gt;</span></code> entries. Remote artifact URIs
will be resolved to absolute filesystem paths, producing a dictionary of
<code class="docutils literal"><span class="pre">&lt;name,</span> <span class="pre">absolute_path&gt;</span></code> entries. <code class="docutils literal"><span class="pre">python_model</span></code> can reference these
resolved entries as the <code class="docutils literal"><span class="pre">artifacts</span></code> property of the <code class="docutils literal"><span class="pre">context</span></code> parameter
in <a class="reference internal" href="#mlflow.pyfunc.PythonModel.load_context" title="mlflow.pyfunc.PythonModel.load_context"><code class="xref py py-func docutils literal"><span class="pre">PythonModel.load_context()</span></code></a>
and <a class="reference internal" href="#mlflow.pyfunc.PythonModel.predict" title="mlflow.pyfunc.PythonModel.predict"><code class="xref py py-func docutils literal"><span class="pre">PythonModel.predict()</span></code></a>.
For example, consider the following <code class="docutils literal"><span class="pre">artifacts</span></code> dictionary:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;my_file&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://my-bucket/path/to/my/file&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case, the <code class="docutils literal"><span class="pre">&quot;my_file&quot;</span></code> artifact will be downloaded from S3. The
<code class="docutils literal"><span class="pre">python_model</span></code> can then refer to <code class="docutils literal"><span class="pre">&quot;my_file&quot;</span></code> as an absolute filesystem
path via <code class="docutils literal"><span class="pre">context.artifacts[&quot;my_file&quot;]</span></code>.</p>
<p>If <em>None</em>, no artifacts will be added to the model.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mlflow.pyfunc.spark_udf">
<code class="descclassname">mlflow.pyfunc.</code><code class="descname">spark_udf</code><span class="sig-paren">(</span><em>spark</em>, <em>path</em>, <em>run_id=None</em>, <em>result_type='double'</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.pyfunc.spark_udf" title="Permalink to this definition"> </a></dt>
<dd><p>A Spark UDF that can be used to invoke the Python function formatted model.</p>
<p>Parameters passed to the UDF are forwarded to the model as a DataFrame where the names are
ordinals (0, 1, …).</p>
<p>The predictions are filtered to contain only the columns that can be represented as the
<code class="docutils literal"><span class="pre">result_type</span></code>. If the <code class="docutils literal"><span class="pre">result_type</span></code> is string or array of strings, all predictions are
converted to string. If the result type is not an array type, the left most column with
matching type will be returned.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">predict</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">pyfunc</span><span class="o">.</span><span class="n">spark_udf</span><span class="p">(</span><span class="n">spark</span><span class="p">,</span> <span class="s2">&quot;/my/local/model&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">withColumn</span><span class="p">(</span><span class="s2">&quot;prediction&quot;</span><span class="p">,</span> <span class="n">predict</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>spark</strong> – A SparkSession object.</li>
<li><strong>path</strong> – A path containing a <a class="reference internal" href="#module-mlflow.pyfunc" title="mlflow.pyfunc"><code class="xref py py-mod docutils literal"><span class="pre">mlflow.pyfunc</span></code></a> model.</li>
<li><strong>run_id</strong> – ID of the run that produced this model. If provided, <code class="docutils literal"><span class="pre">run_id</span></code> is used to
retrieve the model logged with MLflow.</li>
<li><strong>result_type</strong> – <p>the return type of the user-defined function. The value can be either a
<code class="xref py py-class docutils literal"><span class="pre">pyspark.sql.types.DataType</span></code> object or a DDL-formatted type string.
Only a primitive type or an array (pyspark.sql.types.ArrayType) of primitive
types are allowed. The following classes of result type are supported:
- “int” or pyspark.sql.types.IntegerType: The leftmost integer that can fit</p>
<blockquote>
<div>in int32 result is returned or exception is raised if there is none.</div></blockquote>
<ul>
<li>”long” or pyspark.sql.types.LongType: The leftmost long integer that can
fit in int64 result is returned or exception is raised if there is none.</li>
<li>ArrayType(IntegerType|LongType): Return all integer columns that can fit
into the requested size.</li>
<li>”float” or pyspark.sql.types.FloatType: The leftmost numeric result cast
to float32 is returned or exception is raised if there is none.</li>
<li>”double” or pyspark.sql.types.DoubleType: The leftmost numeric result cast
to double is returned or exception is raised if there is none..</li>
<li>ArrayType(FloatType|DoubleType): Return all numeric columns cast to the
requested type. Exception is raised if there are no numeric columns.</li>
<li>”string” or pyspark.sql.types.StringType: Result is the leftmost column
converted to string.</li>
<li>ArrayType(StringType): Return all columns converted to string.</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Spark UDF which will apply model’s prediction method to the data. Default double.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<dl class="class">
<dt id="mlflow.pyfunc.PythonModelContext">
<em class="property">class </em><code class="descclassname">mlflow.pyfunc.</code><code class="descname">PythonModelContext</code><a class="headerlink" href="#mlflow.pyfunc.PythonModelContext" title="Permalink to this definition"> </a></dt>
<dd><p>A collection of artifacts that a <a class="reference internal" href="#mlflow.pyfunc.PythonModel" title="mlflow.pyfunc.PythonModel"><code class="xref py py-class docutils literal"><span class="pre">PythonModel</span></code></a> can use when performing inference.
<a class="reference internal" href="#mlflow.pyfunc.PythonModelContext" title="mlflow.pyfunc.PythonModelContext"><code class="xref py py-class docutils literal"><span class="pre">PythonModelContext</span></code></a> objects are created <em>implicitly</em> by the
<a class="reference internal" href="#mlflow.pyfunc.save_model" title="mlflow.pyfunc.save_model"><code class="xref py py-func docutils literal"><span class="pre">save_model()</span></code></a> and
<a class="reference internal" href="#mlflow.pyfunc.log_model" title="mlflow.pyfunc.log_model"><code class="xref py py-func docutils literal"><span class="pre">log_model()</span></code></a> persistence methods, using the contents specified
by the <code class="docutils literal"><span class="pre">artifacts</span></code> parameter of these methods.</p>
<dl class="attribute">
<dt id="mlflow.pyfunc.PythonModelContext.artifacts">
<code class="descname">artifacts</code><a class="headerlink" href="#mlflow.pyfunc.PythonModelContext.artifacts" title="Permalink to this definition"> </a></dt>
<dd><p><em>return</em> – A dictionary containing <code class="docutils literal"><span class="pre">&lt;name,</span> <span class="pre">artifact_path&gt;</span></code> entries, where <code class="docutils literal"><span class="pre">artifact_path</span></code>
is an absolute filesystem path to the artifact.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mlflow.pyfunc.PythonModel">
<em class="property">class </em><code class="descclassname">mlflow.pyfunc.</code><code class="descname">PythonModel</code><a class="headerlink" href="#mlflow.pyfunc.PythonModel" title="Permalink to this definition"> </a></dt>
<dd><p>Represents a generic Python model that evaluates inputs and produces API-compatible outputs.
By subclassing <a class="reference internal" href="#mlflow.pyfunc.PythonModel" title="mlflow.pyfunc.PythonModel"><code class="xref py py-class docutils literal"><span class="pre">PythonModel</span></code></a>, users can create customized MLflow models with the
“python_function” (“pyfunc”) flavor, leveraging custom inference logic and artifact
dependencies.</p>
<dl class="method">
<dt id="mlflow.pyfunc.PythonModel.load_context">
<code class="descname">load_context</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.pyfunc.PythonModel.load_context" title="Permalink to this definition"> </a></dt>
<dd><p>Loads artifacts from the specified <a class="reference internal" href="#mlflow.pyfunc.PythonModelContext" title="mlflow.pyfunc.PythonModelContext"><code class="xref py py-class docutils literal"><span class="pre">PythonModelContext</span></code></a> that can be used by
<a class="reference internal" href="#mlflow.pyfunc.PythonModel.predict" title="mlflow.pyfunc.PythonModel.predict"><code class="xref py py-func docutils literal"><span class="pre">predict()</span></code></a> when evaluating inputs. When loading an MLflow model with
<a class="reference internal" href="#mlflow.pyfunc.load_pyfunc" title="mlflow.pyfunc.load_pyfunc"><code class="xref py py-func docutils literal"><span class="pre">load_pyfunc()</span></code></a>, this method will be called as soon as the <a class="reference internal" href="#mlflow.pyfunc.PythonModel" title="mlflow.pyfunc.PythonModel"><code class="xref py py-class docutils literal"><span class="pre">PythonModel</span></code></a> is
constructed.</p>
<p>The same <a class="reference internal" href="#mlflow.pyfunc.PythonModelContext" title="mlflow.pyfunc.PythonModelContext"><code class="xref py py-class docutils literal"><span class="pre">PythonModelContext</span></code></a> will also be available during calls to
<a class="reference internal" href="#mlflow.pyfunc.PythonModel.predict" title="mlflow.pyfunc.PythonModel.predict"><code class="xref py py-func docutils literal"><span class="pre">predict()</span></code></a>, but it may be more efficient to override this method
and load artifacts from the context at model load time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> – A <a class="reference internal" href="#mlflow.pyfunc.PythonModelContext" title="mlflow.pyfunc.PythonModelContext"><code class="xref py py-class docutils literal"><span class="pre">PythonModelContext</span></code></a> instance containing artifacts that the model
can use to perform inference.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mlflow.pyfunc.PythonModel.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>context</em>, <em>model_input</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.pyfunc.PythonModel.predict" title="Permalink to this definition"> </a></dt>
<dd><p>Evaluates a pyfunc-compatible input and produces a pyfunc-compatible output.
For more information about the pyfunc input/output API, see the <a class="reference internal" href="#pyfunc-inference-api"><span class="std std-ref">Inference API</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> – A <a class="reference internal" href="#mlflow.pyfunc.PythonModelContext" title="mlflow.pyfunc.PythonModelContext"><code class="xref py py-class docutils literal"><span class="pre">PythonModelContext</span></code></a> instance containing artifacts that the model
can use to perform inference.</li>
<li><strong>model_input</strong> – A pyfunc-compatible input for the model to evaluate.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


              </div>
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mlflow.projects.html" class="btn btn-neutral" title="mlflow.projects" accesskey="p"><span class="db-icon db-icon-chevron-left"></span> Previous</a>
      
      
        <a href="mlflow.pytorch.html" class="btn btn-neutral" title="mlflow.pytorch" accesskey="n">Next <span class="db-icon db-icon-chevron-right"></span></a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2019. All rights reserved.
      </p>

  </div> 

</footer>
          </div>
        </div>
      </section>
    </main>
  </page>

  


  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:'../',
      VERSION:'0.9.0',
      COLLAPSE_INDEX:false,
      FILE_SUFFIX:'.html',
      HAS_SOURCE:  true
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/languagesections.js"></script>
  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  
  
  
  <script type="text/javascript">var CLIPPY_SVG_PATH = "../_static/clippy.svg";</script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44077918-9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-44077918-9');
</script>


  
    <!-- Algolia Search -->
    <script type="text/javascript">
      var algoliaConfigs = {
        key: 'b6d79a1058f2b3c1ee03bf659ade5a4b',
        index: 'mlflow',
      };
    </script>
    <div id="algolia-wrapper"></div>
    <script src="../_static/js/tether.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  
</body>
</html>