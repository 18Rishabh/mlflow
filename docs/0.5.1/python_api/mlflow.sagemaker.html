
  

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mlflow.sagemaker &mdash; MLflow 0.5.1 documentation</title>
  
   
  <link rel="canonical" href="https://www.mlflow.org/docs/latest/python_api/mlflow.sagemaker.html">
  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    

    

  
    
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-WXWDBL');</script>
      

  

  
  
    

  

  
  
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    
    <link rel="stylesheet" href="../_static/css/algolia.css" type="text/css" />
    
  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MLflow 0.5.1 documentation" href="../index.html"/>
        <link rel="up" title="Python API" href="index.html"/>
        <link rel="next" title="mlflow.models" href="/mlflow.serving.html"/>
        <link rel="prev" title="mlflow.pytorch" href="/mlflow.pytorch.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  

  
  <nav class="wy-nav-top header" role="navigation" aria-label="top navigation">
    <ul>
  <li class="menu-toggle">
    <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
    <a href="../index.html" class="wy-nav-top-logo"><img src="../_static/MLflow-logo-final-black.png" alt="MLFlow" /></a> <span class="version">0.5.1</span>
  </li>
</ul>
  </nav>
  <page>
    

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    
<div role="search">
  
  <input id="algolia-search" type="text" name="q" placeholder="Search" />
  
</div>


    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home"><img src="../_static/icons/nav-home.svg"> MLflow</a>
    

    
      

      
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tracking.html">MLflow Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects.html">MLflow Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">MLflow Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command-Line Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mlflow.html">mlflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.azureml.html">mlflow.azureml</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.entities.html">mlflow.entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.h2o.html">mlflow.h2o</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.keras.html">mlflow.keras</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.projects.html">mlflow.projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pyfunc.html">mlflow.pyfunc</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pytorch.html">mlflow.pytorch</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">mlflow.sagemaker</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.serving.html">mlflow.models</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.sklearn.html">mlflow.sklearn</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.spark.html">mlflow.spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.tensorflow.html">mlflow.tensorflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.tracking.html">mlflow.tracking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rest-api.html">REST API</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    

    <p>
      <a id='feedbacklink' href="https://github.com/mlflow/mlflow/blob/master/CONTRIBUTING.rst" target="_blank">Contribute</a>
    </p>
  </div>
</div>
    </nav>

    <main class="wy-grid-for-nav">
      <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
        <div class="wy-nav-content">
          <div class="rst-content">
            










<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
        <li><a href="index.html">Python API</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>mlflow.sagemaker</li>
    
    
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/databricks/mlflow/blob/master/docs/source/python_api/mlflow.sagemaker.rst" class="fa fa-github"> Edit on GitHub</a>
    </li>
    
  </ul>
</div>
            <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
              <div itemprop="articleBody">
                
  <div class="section" id="module-mlflow.sagemaker">
<span id="mlflow-sagemaker"></span><h1>mlflow.sagemaker<a class="headerlink" href="#module-mlflow.sagemaker" title="Permalink to this headline"> </a></h1>
<p>Utilities for deploying MLflow models to Amazon SageMaker.</p>
<dl class="function">
<dt id="mlflow.sagemaker.build_image">
<code class="descclassname">mlflow.sagemaker.</code><code class="descname">build_image</code><span class="sig-paren">(</span><em>name='mlflow-pyfunc'</em>, <em>mlflow_home=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.sagemaker.build_image" title="Permalink to this definition"> </a></dt>
<dd><p>This function builds an MLflow Docker image.
The image is built locally and it requires Docker to run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> – image name</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mlflow.sagemaker.delete">
<code class="descclassname">mlflow.sagemaker.</code><code class="descname">delete</code><span class="sig-paren">(</span><em>app_name</em>, <em>region_name='us-west-2'</em>, <em>archive=False</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.sagemaker.delete" title="Permalink to this definition"> </a></dt>
<dd><p>Delete the specified application.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app_name</strong> – Name of the deployed application.</li>
<li><strong>region_name</strong> – Name of the AWS region in which the application is deployed.</li>
<li><strong>archive</strong> – If True, resources associated with the specified application, such
as its associated models and endpoint configuration, will be preserved.
If False, these resources will be deleted.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mlflow.sagemaker.deploy">
<code class="descclassname">mlflow.sagemaker.</code><code class="descname">deploy</code><span class="sig-paren">(</span><em>app_name</em>, <em>model_path</em>, <em>execution_role_arn=None</em>, <em>bucket=None</em>, <em>run_id=None</em>, <em>image_url=None</em>, <em>region_name='us-west-2'</em>, <em>mode='create'</em>, <em>archive=False</em>, <em>instance_type='ml.m4.xlarge'</em>, <em>instance_count=1</em>, <em>vpc_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.sagemaker.deploy" title="Permalink to this definition"> </a></dt>
<dd><p>Deploy model on SageMaker.
Currently active AWS account needs to have correct permissions set up.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app_name</strong> – Name of the deployed application.</li>
<li><strong>path</strong> – Path to the model. Either local if no <code class="docutils literal notranslate"><span class="pre">run_id</span></code> or MLflow-relative if <code class="docutils literal notranslate"><span class="pre">run_id</span></code>
is specified.</li>
<li><strong>execution_role_arn</strong> – Amazon execution role with SageMaker rights.
Defaults to the currently-assumed role.</li>
<li><strong>bucket</strong> – S3 bucket where model artifacts will be stored. Defaults to a
SageMaker-compatible bucket name.</li>
<li><strong>run_id</strong> – MLflow run ID.</li>
<li><strong>image</strong> – Name of the Docker image to be used. if not specified, uses a
publicly-available pre-built image.</li>
<li><strong>region_name</strong> – Name of the AWS region to which to deploy the application.</li>
<li><strong>mode</strong> – <p>The mode in which to deploy the application. Must be one of the following:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">mlflow.sagemaker.DEPLOYMENT_MODE_CREATE</span></code></dt>
<dd>Create an application with the specified name and model. This fails if an
application of the same name already exists.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mlflow.sagemaker.DEPLOYMENT_MODE_REPLACE</span></code></dt>
<dd>If an application of the specified name exists, its model(s) is replaced with
the specified model. If no such application exists, it is created with the
specified name and model.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mlflow.sagemaker.DEPLOYMENT_MODE_ADD</span></code></dt>
<dd>Add the specified model to a pre-existing application with the specified name,
if one exists. If the application does not exist, a new application is created
with the specified name and model. NOTE: If the application <strong>already exists</strong>,
the specified model is added to the application’s corresponding SageMaker
endpoint with an initial weight of zero (0). To route traffic to the model,
update the application’s associated endpoint configuration using either the
AWS console or the <code class="docutils literal notranslate"><span class="pre">UpdateEndpointWeightsAndCapacities</span></code> function defined in
<a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/API_UpdateEndpointWeightsAndCapacities.html">https://docs.aws.amazon.com/sagemaker/latest/dg/API_UpdateEndpointWeightsAndCapacities.html</a>.</dd>
</dl>
</li>
<li><strong>archive</strong> – If True, any pre-existing SageMaker application resources that become inactive
(i.e. as a result of deploying in <code class="docutils literal notranslate"><span class="pre">mlflow.sagemaker.DEPLOYMENT_MODE_REPLACE</span></code>
mode) are preserved. If False, these resources are deleted.</li>
<li><strong>instance_type</strong> – The type of SageMaker ML instance on which to deploy the model. For a list
of supported instance types, see
<a class="reference external" href="https://aws.amazon.com/sagemaker/pricing/instance-types/">https://aws.amazon.com/sagemaker/pricing/instance-types/</a>.</li>
<li><strong>instance_count</strong> – The number of SageMaker ML instances on which to deploy the model.</li>
<li><strong>vpc_config</strong> – <p>A dictionary specifying the VPC configuration to use when creating the
new SageMaker model associated with this application. The acceptable values
for this parameter are identical to those of the <cite>VpcConfig</cite> parameter in the
SageMaker boto3 client (<a class="reference external" href="https://boto3.readthedocs.io/en/latest/reference/">https://boto3.readthedocs.io/en/latest/reference/</a>
services/sagemaker.html#SageMaker.Client.create_model). For more information,
see <a class="reference external" href="https://docs.aws.amazon.com/sagemaker/latest/dg/API_VpcConfig.html">https://docs.aws.amazon.com/sagemaker/latest/dg/API_VpcConfig.html</a>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mlflow.sagemaker</span> <span class="k">as</span> <span class="nn">mfs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vpc_config</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>                 <span class="s1">&#39;SecurityGroupIds&#39;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>                     <span class="s1">&#39;sg-123456abc&#39;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="p">],</span>
<span class="gp">... </span>                 <span class="s1">&#39;Subnets&#39;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>                     <span class="s1">&#39;subnet-123456abc&#39;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="p">]</span>
<span class="gp">... </span>             <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfs</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">vpc_config</span><span class="o">=</span><span class="n">vpc_config</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mlflow.sagemaker.push_image_to_ecr">
<code class="descclassname">mlflow.sagemaker.</code><code class="descname">push_image_to_ecr</code><span class="sig-paren">(</span><em>image='mlflow-pyfunc'</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.sagemaker.push_image_to_ecr" title="Permalink to this definition"> </a></dt>
<dd><p>Push local Docker image to ECR.</p>
<p>The image is pushed under current active AWS account and to current active AWS region.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>image</strong> – image name</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mlflow.sagemaker.run_local">
<code class="descclassname">mlflow.sagemaker.</code><code class="descname">run_local</code><span class="sig-paren">(</span><em>model_path</em>, <em>run_id=None</em>, <em>port=5000</em>, <em>image='mlflow-pyfunc'</em><span class="sig-paren">)</span><a class="headerlink" href="#mlflow.sagemaker.run_local" title="Permalink to this definition"> </a></dt>
<dd><p>Serve model locally in a SageMaker compatible Docker container.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>model_path</strong> – path to the model. Either local if no <code class="docutils literal notranslate"><span class="pre">run_id</span></code> or MLflow-relative if
<code class="docutils literal notranslate"><span class="pre">run_id</span></code> is specified.</li>
<li><strong>run_id</strong> – MLflow run ID.</li>
<li><strong>port</strong> – Local port.</li>
<li><strong>image</strong> – Name of the Docker image to be used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


              </div>
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mlflow.pytorch.html" class="btn btn-neutral" title="mlflow.pytorch" accesskey="p"><span class="db-icon db-icon-chevron-left"></span> Previous</a>
      
      
        <a href="mlflow.serving.html" class="btn btn-neutral" title="mlflow.models" accesskey="n">Next <span class="db-icon db-icon-chevron-right"></span></a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2018. All rights reserved.
      </p>

  </div> 

</footer>
          </div>
        </div>
      </section>
    </main>
  </page>

  


  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:'../',
      VERSION:'0.5.1',
      COLLAPSE_INDEX:false,
      FILE_SUFFIX:'.html',
      HAS_SOURCE:  true
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  
  
  
  <script type="text/javascript">var CLIPPY_SVG_PATH = "../_static/clippy.svg";</script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44077918-9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-44077918-9');
</script>


  
    <!-- Algolia Search -->
    <script type="text/javascript">
      var algoliaConfigs = {
        key: 'b6d79a1058f2b3c1ee03bf659ade5a4b',
        index: 'mlflow',
      };
    </script>
    <div id="algolia-wrapper"></div>
    <script src="../_static/js/tether.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  
</body>
</html>