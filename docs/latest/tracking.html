
  

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MLflow Tracking &mdash; MLflow 0.8.1 documentation</title>
  
   
  <link rel="canonical" href="https://www.mlflow.org/docs/latest/tracking.html">
  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    

    

  
    
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-WXWDBL');</script>
      

  

  
  
    

  

  
  
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    
    <link rel="stylesheet" href="_static/css/algolia.css" type="text/css" />
    
  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="MLflow 0.8.1 documentation" href="index.html"/>
        <link rel="next" title="MLflow Projects" href="/projects.html"/>
        <link rel="prev" title="Concepts" href="/concepts.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  

  
  <nav class="wy-nav-top header" role="navigation" aria-label="top navigation">
    <ul>
  <li class="menu-toggle">
    <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
    <a href="index.html" class="wy-nav-top-logo"><img src="_static/MLflow-logo-final-black.png" alt="MLFlow" /></a> <span class="version">0.8.1</span>
  </li>
</ul>
  </nav>
  <page>
    

    <nav data-toggle="wy-nav-shift" class="wy-nav-side relative">
      <div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    
<div role="search">
  
  <input id="algolia-search" type="text" name="q" placeholder="Search" />
  
</div>


    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="index.html" class="main-navigation-home"><img src="_static/icons/nav-home.svg"> MLflow</a>
    

    
      

      
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MLflow Tracking</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#concepts">Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#where-runs-are-recorded">Where Runs Are Recorded</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logging-data-to-runs">Logging Data to Runs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-logging-functions">Basic Logging Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#launching-multiple-runs-in-one-program">Launching Multiple Runs in One Program</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#organizing-runs-in-experiments">Organizing Runs in Experiments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#managing-experiments-and-runs-with-the-tracking-service-api">Managing Experiments and Runs with the Tracking Service API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#adding-tags-to-runs">Adding Tags to Runs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id2">Tracking UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#querying-runs-programmatically">Querying Runs Programmatically</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mlflow-tracking-servers">MLflow Tracking Servers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#storage">Storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supported-artifact-stores">Supported Artifact Stores</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#networking">Networking</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging-to-a-tracking-server">Logging to a Tracking Server</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">MLflow Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">MLflow Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_api/index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="R-api.html">R API</a></li>
<li class="toctree-l1"><a class="reference internal" href="java_api/index.html">Java API</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest-api.html">REST API</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    

    <p>
      <a id='feedbacklink' href="https://github.com/mlflow/mlflow/blob/master/CONTRIBUTING.rst" target="_blank">Contribute</a>
    </p>
  </div>
</div>
    </nav>

    <main class="wy-grid-for-nav">
      <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
        <div class="wy-nav-content">
          <div class="rst-content">
            










<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>MLflow Tracking</li>
    
    
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/databricks/mlflow/blob/master/docs/source/tracking.rst" class="fa fa-github"> Edit on GitHub</a>
    </li>
    
  </ul>
</div>
            <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
              <div itemprop="articleBody">
                
  <div class="section" id="mlflow-tracking">
<span id="tracking"></span><h1>MLflow Tracking<a class="headerlink" href="#mlflow-tracking" title="Permalink to this headline"> </a></h1>
<p>The MLflow Tracking component is an API and UI for logging parameters, code versions, metrics, and output files
when running your machine learning code and for later visualizing the results.
MLflow Tracking lets you log and query experiments using both <a class="reference internal" href="python_api/index.html#python-api"><span class="std std-ref">Python</span></a> and <a class="reference internal" href="rest_api.html#rest-api"><span class="std std-ref">REST</span></a> APIs.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#concepts" id="id4">Concepts</a></li>
<li><a class="reference internal" href="#where-runs-are-recorded" id="id5">Where Runs Are Recorded</a></li>
<li><a class="reference internal" href="#logging-data-to-runs" id="id6">Logging Data to Runs</a><ul>
<li><a class="reference internal" href="#basic-logging-functions" id="id7">Basic Logging Functions</a></li>
<li><a class="reference internal" href="#launching-multiple-runs-in-one-program" id="id8">Launching Multiple Runs in One Program</a></li>
</ul>
</li>
<li><a class="reference internal" href="#organizing-runs-in-experiments" id="id9">Organizing Runs in Experiments</a><ul>
<li><a class="reference internal" href="#managing-experiments-and-runs-with-the-tracking-service-api" id="id10">Managing Experiments and Runs with the Tracking Service API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2" id="id11">Tracking UI</a></li>
<li><a class="reference internal" href="#querying-runs-programmatically" id="id12">Querying Runs Programmatically</a></li>
<li><a class="reference internal" href="#mlflow-tracking-servers" id="id13">MLflow Tracking Servers</a><ul>
<li><a class="reference internal" href="#storage" id="id14">Storage</a></li>
<li><a class="reference internal" href="#networking" id="id15">Networking</a></li>
<li><a class="reference internal" href="#logging-to-a-tracking-server" id="id16">Logging to a Tracking Server</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="concepts">
<h2><a class="toc-backref" href="#id4">Concepts</a><a class="headerlink" href="#concepts" title="Permalink to this headline"> </a></h2>
<p>MLflow Tracking is organized around the concept of <em>runs</em>, which are executions of some piece of
data science code. Each run records the following information:</p>
<dl class="docutils">
<dt>Code Version</dt>
<dd>Git commit hash used to execute the run, if it was executed from an <a class="reference internal" href="projects.html#projects"><span class="std std-ref">MLflow Project</span></a>.</dd>
<dt>Start &amp; End Time</dt>
<dd>Start and end time of the run</dd>
<dt>Source</dt>
<dd>Name of the file executed to launch the run, or the project name and entry point for the run
if the run was executed from an <a class="reference internal" href="projects.html#projects"><span class="std std-ref">MLflow Project</span></a>.</dd>
<dt>Parameters</dt>
<dd>Key-value input parameters of your choice. Both keys and values are strings.</dd>
<dt>Metrics</dt>
<dd>Key-value metrics where the value is numeric. Each metric can be updated throughout the
course of the run (for example, to track how your model’s loss function is converging), and
MLflow will record and let you visualize the metric’s full history.</dd>
<dt>Artifacts</dt>
<dd>Output files in any format. For example, you can record images (for example, PNGs), models
(for example, a pickled scikit-learn model), or even data files (for example, a
<a class="reference external" href="https://parquet.apache.org/">Parquet</a> file) as artifacts.</dd>
</dl>
<p>You can record runs using MLflow Python, R, Java, and REST APIs from anywhere you run your code. For
example, you can record them in a standalone program, on a remote cloud machine, or in an
interactive notebook. If you record runs in an <a class="reference internal" href="projects.html#projects"><span class="std std-ref">MLflow Project</span></a>, MLflow
remembers the project URI and source version.</p>
<p>You can optionally organize runs into <em>experiments</em>, which group together runs for a
specific task. You can create an experiment using the <code class="docutils literal"><span class="pre">mlflow</span> <span class="pre">experiments</span></code> CLI, with
<a class="reference internal" href="python_api/mlflow.html#mlflow.create_experiment" title="mlflow.create_experiment"><code class="xref py py-func docutils literal"><span class="pre">mlflow.create_experiment()</span></code></a>, or using the corresponding REST parameters. The MLflow API and
UI let you create and search for experiments.</p>
<p>Once your runs have been recorded, you can query them using the <a class="reference internal" href="#tracking-ui"><span class="std std-ref">Adding Tags to Runs</span></a> or the MLflow
API.</p>
</div>
<div class="section" id="where-runs-are-recorded">
<h2><a class="toc-backref" href="#id5">Where Runs Are Recorded</a><a class="headerlink" href="#where-runs-are-recorded" title="Permalink to this headline"> </a></h2>
<p>MLflow runs are recorded either locally in files or remotely to a tracking server.
By default, the MLflow Python API logs runs locally to files in an <code class="docutils literal"><span class="pre">mlruns</span></code> directory wherever you
ran your program. You can then run <code class="docutils literal"><span class="pre">mlflow</span> <span class="pre">ui</span></code> to see the logged runs.</p>
<p>To log runs remotely, set the <code class="docutils literal"><span class="pre">MLFLOW_TRACKING_URI</span></code> environment variable to a tracking server’s URI or
call <a class="reference internal" href="python_api/mlflow.html#mlflow.set_tracking_uri" title="mlflow.set_tracking_uri"><code class="xref py py-func docutils literal"><span class="pre">mlflow.set_tracking_uri()</span></code></a>.</p>
<p>There are different kinds of remote tracking URIs:</p>
<ul class="simple">
<li>Local file path (specified as <code class="docutils literal"><span class="pre">file:/my/local/dir</span></code>), where data is just directly stored locally.</li>
<li>HTTP server (specified as <code class="docutils literal"><span class="pre">https://my-server:5000</span></code>), which is a server hosting an <a class="reference internal" href="#tracking-server"><span class="std std-ref">MLFlow tracking server</span></a>.</li>
<li>Databricks workspace (specified as <code class="docutils literal"><span class="pre">databricks</span></code> or as <code class="docutils literal"><span class="pre">databricks://&lt;profileName&gt;</span></code>, a <a class="reference external" href="https://github.com/databricks/databricks-cli#installation">Databricks CLI profile</a>. This works only in workspaces for which the Databricks MLflow Tracking Server is enabled; contact Databricks if interested.</li>
</ul>
</div>
<div class="section" id="logging-data-to-runs">
<h2><a class="toc-backref" href="#id6">Logging Data to Runs</a><a class="headerlink" href="#logging-data-to-runs" title="Permalink to this headline"> </a></h2>
<p>You can log data to runs using the MLflow Python, R, Java, or REST API. This section
shows the Python API.</p>
<div class="section" id="basic-logging-functions">
<span id="id1"></span><h3><a class="toc-backref" href="#id7">Basic Logging Functions</a><a class="headerlink" href="#basic-logging-functions" title="Permalink to this headline"> </a></h3>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.set_tracking_uri" title="mlflow.set_tracking_uri"><code class="xref py py-func docutils literal"><span class="pre">mlflow.set_tracking_uri()</span></code></a> connects to a tracking URI. You can also set the
<code class="docutils literal"><span class="pre">MLFLOW_TRACKING_URI</span></code> environment variable to have MLflow find a URI from there. In both cases,
the URI can either be a HTTP/HTTPS URI for a remote server, or a local path to log data to a
directory. The URI defaults to <code class="docutils literal"><span class="pre">mlruns</span></code>.</p>
<p><a class="reference internal" href="python_api/mlflow.tracking.html#mlflow.tracking.get_tracking_uri" title="mlflow.tracking.get_tracking_uri"><code class="xref py py-func docutils literal"><span class="pre">mlflow.tracking.get_tracking_uri()</span></code></a> returns the current tracking URI.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.create_experiment" title="mlflow.create_experiment"><code class="xref py py-func docutils literal"><span class="pre">mlflow.create_experiment()</span></code></a> creates a new experiment and returns its ID. Runs can be
launched under the experiment by passing the experiment ID to <code class="docutils literal"><span class="pre">mlflow.start_run</span></code>.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.set_experiment" title="mlflow.set_experiment"><code class="xref py py-func docutils literal"><span class="pre">mlflow.set_experiment()</span></code></a> sets an experiment as active. If the experiment does not exist,
creates a new experiment. If you do not specify an experiment in <a class="reference internal" href="python_api/mlflow.html#mlflow.start_run" title="mlflow.start_run"><code class="xref py py-func docutils literal"><span class="pre">mlflow.start_run()</span></code></a>, new
runs are launched under this experiment.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.start_run" title="mlflow.start_run"><code class="xref py py-func docutils literal"><span class="pre">mlflow.start_run()</span></code></a> returns the currently active run (if one exists), or starts a new run
and returns a <a class="reference internal" href="python_api/mlflow.html#mlflow.ActiveRun" title="mlflow.ActiveRun"><code class="xref py py-class docutils literal"><span class="pre">mlflow.ActiveRun</span></code></a> object usable as a context manager for the
current run. You do not need to call <code class="docutils literal"><span class="pre">start_run</span></code> explicitly: calling one of the logging functions
with no active run will automatically start a new one.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.end_run" title="mlflow.end_run"><code class="xref py py-func docutils literal"><span class="pre">mlflow.end_run()</span></code></a> ends the currently active run, if any, taking an optional run status.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.active_run" title="mlflow.active_run"><code class="xref py py-func docutils literal"><span class="pre">mlflow.active_run()</span></code></a> returns a <a class="reference internal" href="python_api/mlflow.entities.html#mlflow.entities.Run" title="mlflow.entities.Run"><code class="xref py py-class docutils literal"><span class="pre">mlflow.entities.Run</span></code></a> object corresponding to the
currently active run, if any.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.log_param" title="mlflow.log_param"><code class="xref py py-func docutils literal"><span class="pre">mlflow.log_param()</span></code></a> logs a key-value parameter in the currently active run. The keys and
values are both strings.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.log_metric" title="mlflow.log_metric"><code class="xref py py-func docutils literal"><span class="pre">mlflow.log_metric()</span></code></a> logs a key-value metric. The value must always be a number. MLflow will
remember the history of values for each metric.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.log_artifact" title="mlflow.log_artifact"><code class="xref py py-func docutils literal"><span class="pre">mlflow.log_artifact()</span></code></a> logs a local file as an artifact, optionally taking an
<code class="docutils literal"><span class="pre">artifact_path</span></code> to place it in within the run’s artifact URI. Run artifacts can be organized into
directories, so you can place the artifact in a directory this way.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.log_artifacts" title="mlflow.log_artifacts"><code class="xref py py-func docutils literal"><span class="pre">mlflow.log_artifacts()</span></code></a> logs all the files in a given directory as artifacts, again taking
an optional <code class="docutils literal"><span class="pre">artifact_path</span></code>.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.get_artifact_uri" title="mlflow.get_artifact_uri"><code class="xref py py-func docutils literal"><span class="pre">mlflow.get_artifact_uri()</span></code></a> returns the URI that artifacts from the current run should be
logged to.</p>
</div>
<div class="section" id="launching-multiple-runs-in-one-program">
<h3><a class="toc-backref" href="#id8">Launching Multiple Runs in One Program</a><a class="headerlink" href="#launching-multiple-runs-in-one-program" title="Permalink to this headline"> </a></h3>
<p>Sometimes you want to execute multiple MLflow runs in the same program: for example, maybe you are
performing a hyperparameter search locally or your experiments are just very fast to run. This is
easy to do because the <code class="docutils literal"><span class="pre">ActiveRun</span></code> object returned by <a class="reference internal" href="python_api/mlflow.html#mlflow.start_run" title="mlflow.start_run"><code class="xref py py-func docutils literal"><span class="pre">mlflow.start_run()</span></code></a> is a Python
<a class="reference external" href="https://docs.python.org/2.5/whatsnew/pep-343.html">context manager</a>. You can “scope” each run to
just one block of code as follows:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">():</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">log_param</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">log_metric</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The run remains open throughout the <code class="docutils literal"><span class="pre">with</span></code> statement, and is automatically closed when the
statement exits, even if it exits due to an exception.</p>
</div>
</div>
<div class="section" id="organizing-runs-in-experiments">
<h2><a class="toc-backref" href="#id9">Organizing Runs in Experiments</a><a class="headerlink" href="#organizing-runs-in-experiments" title="Permalink to this headline"> </a></h2>
<p>MLflow allows you to group runs under experiments, which can be useful for comparing runs intended
to tackle a particular task. You can create experiments using the <a class="reference internal" href="cli.html#cli"><span class="std std-ref">Command-Line Interface</span></a> (<code class="docutils literal"><span class="pre">mlflow</span> <span class="pre">experiments</span></code>) or
the <a class="reference internal" href="python_api/mlflow.html#mlflow.create_experiment" title="mlflow.create_experiment"><code class="xref py py-func docutils literal"><span class="pre">mlflow.create_experiment()</span></code></a> Python API. You can pass the experiment ID for a individual run
using the CLI (for example, <code class="docutils literal"><span class="pre">mlflow</span> <span class="pre">run</span> <span class="pre">...</span> <span class="pre">--experiment-id</span> <span class="pre">[ID]</span></code>) or the <code class="docutils literal"><span class="pre">MLFLOW_EXPERIMENT_ID</span></code>
environment variable.</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Prints &quot;created an experiment with ID &lt;id&gt;</span>
<span class="n">mlflow</span> <span class="n">experiments</span> <span class="n">create</span> <span class="n">fraud</span><span class="o">-</span><span class="n">detection</span>
<span class="c1"># Set the ID via environment variables</span>
<span class="n">export</span> <span class="n">MLFLOW_EXPERIMENT_ID</span><span class="o">=&lt;</span><span class="nb">id</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Launch a run. The experiment ID is inferred from the MLFLOW_EXPERIMENT_ID environment</span>
<span class="c1"># variable, or from the --experiment-id parameter passed to the MLflow CLI (the latter</span>
<span class="c1"># taking precedence)</span>
<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">():</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">log_param</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">log_metric</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="managing-experiments-and-runs-with-the-tracking-service-api">
<h3><a class="toc-backref" href="#id10">Managing Experiments and Runs with the Tracking Service API</a><a class="headerlink" href="#managing-experiments-and-runs-with-the-tracking-service-api" title="Permalink to this headline"> </a></h3>
<p>MLflow provides a more detailed Tracking Service API for managing experiments and runs directly,
which is available through client SDK in the <a class="reference internal" href="python_api/mlflow.tracking.html#module-mlflow.tracking" title="mlflow.tracking"><code class="xref py py-mod docutils literal"><span class="pre">mlflow.tracking</span></code></a> module.
This makes it possible to query data about past runs, log additional information about them, create experiments,
add tags to a run, and more.</p>
<p class="rubric">Example</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span>  <span class="nn">mlflow.tracking</span> <span class="k">import</span> <span class="n">MlflowClient</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">MlflowClient</span><span class="p">()</span>
<span class="n">experiments</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_experiments</span><span class="p">()</span> <span class="c1"># returns a list of mlflow.entities.Experiment</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_run</span><span class="p">(</span><span class="n">experiments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">experiment_id</span><span class="p">)</span> <span class="c1"># returns mlflow.entities.Run</span>
<span class="n">client</span><span class="o">.</span><span class="n">log_param</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">run_uuid</span><span class="p">,</span> <span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;world&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">set_terminated</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">run_uuid</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="adding-tags-to-runs">
<span id="tracking-ui"></span><h4>Adding Tags to Runs<a class="headerlink" href="#adding-tags-to-runs" title="Permalink to this headline"> </a></h4>
<p>The <a class="reference internal" href="python_api/mlflow.tracking.html#mlflow.tracking.MlflowClient.set_tag" title="mlflow.tracking.MlflowClient.set_tag"><code class="xref py py-func docutils literal"><span class="pre">mlflow.tracking.MlflowClient.set_tag()</span></code></a> function lets you add custom tags to runs. For example:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">set_tag</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">run_uuid</span><span class="p">,</span> <span class="s2">&quot;tag_key&quot;</span><span class="p">,</span> <span class="s2">&quot;tag_value&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Do not use the prefix <code class="docutils literal"><span class="pre">mlflow</span></code> for a tag.  This prefix is reserved for use by MLflow.</p>
</div>
</div>
</div>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id11">Tracking UI</a><a class="headerlink" href="#id2" title="Permalink to this headline"> </a></h2>
<p>The Tracking UI lets you visualize, search and compare runs, as well as download run artifacts or
metadata for analysis in other tools. If you have been logging runs to a local <code class="docutils literal"><span class="pre">mlruns</span></code> directory,
run <code class="docutils literal"><span class="pre">mlflow</span> <span class="pre">ui</span></code> in the directory above it, and it will load the corresponding runs.
Alternatively, the <a class="reference internal" href="#tracking-server"><span class="std std-ref">MLflow tracking server</span></a> serves the same UI and enables remote storage of run artifacts.</p>
<p>The UI contains the following key features:</p>
<ul class="simple">
<li>Experiment-based run listing and comparison</li>
<li>Searching for runs by parameter or metric value</li>
<li>Visualizing run metrics</li>
<li>Downloading run results</li>
</ul>
</div>
<div class="section" id="querying-runs-programmatically">
<span id="tracking-query-api"></span><h2><a class="toc-backref" href="#id12">Querying Runs Programmatically</a><a class="headerlink" href="#querying-runs-programmatically" title="Permalink to this headline"> </a></h2>
<p>All of the functions in the Tracking UI can be accessed programmatically. This makes it easy to do several common tasks:</p>
<ul class="simple">
<li>Query and compare runs using any data analysis tool of your choice, for example, <strong>pandas</strong>.</li>
<li>Determine the artifact URI for a run to feed some of its artifacts into a new run when executing a workflow. For an example of querying runs and constructing a multistep workflow, see the MLflow <a class="reference external" href="https://github.com/mlflow/mlflow/blob/15cc05ce2217b7c7af4133977b07542934a9a19f/examples/multistep_workflow/main.py#L63">Multistep Workflow Example project</a>.</li>
<li>Load artifacts from past runs as <a class="reference internal" href="models.html#models"><span class="std std-ref">MLflow Models</span></a>. For an example of training, exporting, and loading a model, and predicting using the model, see the MLFlow <a class="reference external" href="https://github.com/mlflow/mlflow/tree/master/examples/tensorflow">TensorFlow example</a>.</li>
<li>Run automated parameter search algorithms, where you query the metrics from various runs to submit new ones. For an example of running automated parameter search algorithms, see the MLflow <a class="reference external" href="https://github.com/mlflow/mlflow/blob/master/examples/hyperparam/README.rst">Hyperparameter Tuning Example project</a>.</li>
</ul>
</div>
<div class="section" id="mlflow-tracking-servers">
<span id="tracking-server"></span><h2><a class="toc-backref" href="#id13">MLflow Tracking Servers</a><a class="headerlink" href="#mlflow-tracking-servers" title="Permalink to this headline"> </a></h2>
<div class="contents local topic" id="in-this-section">
<p class="topic-title first">In this section:</p>
<ul class="simple">
<li><a class="reference internal" href="#storage" id="id17">Storage</a><ul>
<li><a class="reference internal" href="#supported-artifact-stores" id="id18">Supported Artifact Stores</a></li>
</ul>
</li>
<li><a class="reference internal" href="#networking" id="id19">Networking</a></li>
<li><a class="reference internal" href="#logging-to-a-tracking-server" id="id20">Logging to a Tracking Server</a></li>
</ul>
</div>
<p>You run an MLflow tracking server using <code class="docutils literal"><span class="pre">mlflow</span> <span class="pre">server</span></code>.  An example configuration for a server is:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">mlflow</span> <span class="n">server</span> \
    <span class="o">--</span><span class="n">file</span><span class="o">-</span><span class="n">store</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">persistent</span><span class="o">-</span><span class="n">disk</span> \
    <span class="o">--</span><span class="n">default</span><span class="o">-</span><span class="n">artifact</span><span class="o">-</span><span class="n">root</span> <span class="n">s3</span><span class="p">:</span><span class="o">//</span><span class="n">my</span><span class="o">-</span><span class="n">mlflow</span><span class="o">-</span><span class="n">bucket</span><span class="o">/</span> \
    <span class="o">--</span><span class="n">host</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
</pre></div>
</div>
<div class="section" id="storage">
<h3><a class="toc-backref" href="#id17">Storage</a><a class="headerlink" href="#storage" title="Permalink to this headline"> </a></h3>
<p>An MLflow tracking server has two properties related to how data is stored: file store and artifact store.</p>
<p>The <em>file store</em> (exposed as <code class="docutils literal"><span class="pre">--file-store</span></code>) is where the <em>server</em> stores run and experiment metadata.
It defaults to the local <code class="docutils literal"><span class="pre">./mlruns</span></code> directory (the same as when running <code class="docutils literal"><span class="pre">mlflow</span> <span class="pre">run</span></code> locally), but when
running a server, make sure that this points to a persistent (that is, non-ephemeral) file system location.</p>
<p>The <em>artifact store</em> is a location suitable for large data (such as an S3 bucket or shared NFS file system)
and is where <em>clients</em> log their artifact output (for example, models). The artifact store is a property
of an experiment, but the <code class="docutils literal"><span class="pre">--default-artifact-root</span></code> flag sets the artifact root URI for
newly-created experiments that do not specify one.
Once you create an experiment, <code class="docutils literal"><span class="pre">--default-artifact-root</span></code> is no longer relevant to it.</p>
<p>To allow the server and clients to access the artifact location, you should configure your cloud
provider credentials as normal. For example, for S3, you can set the <code class="docutils literal"><span class="pre">AWS_ACCESS_KEY_ID</span></code>
and <code class="docutils literal"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code> environment variables, use an IAM role, or configure a default
profile in <code class="docutils literal"><span class="pre">~/.aws/credentials</span></code>.
See <a class="reference external" href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/setup-credentials.html">Set up AWS Credentials and Region for Development</a> for more info.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If you do not specify a <code class="docutils literal"><span class="pre">--default-artifact-root</span></code> or an artifact URI when creating the experiment
(for example, <code class="docutils literal"><span class="pre">mlflow</span> <span class="pre">experiments</span> <span class="pre">create</span> <span class="pre">--artifact-root</span> <span class="pre">s3://&lt;my-bucket&gt;</span></code>), the artifact root
is a path inside the file store. Typically this is not an appropriate location, as the client and
server will probably be referring to different physical locations (that is, the same path on different disks).</p>
</div>
<div class="section" id="supported-artifact-stores">
<h4><a class="toc-backref" href="#id18">Supported Artifact Stores</a><a class="headerlink" href="#supported-artifact-stores" title="Permalink to this headline"> </a></h4>
<p>In addition to local file paths, MLflow supports the following storage systems as artifact stores: Amazon S3, Azure Blob Storage, Google Cloud Storage, SFTP server, and NFS.</p>
<div class="section" id="amazon-s3">
<h5>Amazon S3<a class="headerlink" href="#amazon-s3" title="Permalink to this headline"> </a></h5>
<p>To store artifacts in S3, specify a URI of the form <code class="docutils literal"><span class="pre">s3://&lt;bucket&gt;/&lt;path&gt;</span></code>. MLflow obtains
credentials to access S3 from your machine’s IAM role, a profile in <code class="docutils literal"><span class="pre">~/.aws/credentials</span></code>, or
the environment variables <code class="docutils literal"><span class="pre">AWS_ACCESS_KEY_ID</span></code> and <code class="docutils literal"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code> depending on which of
these are available. For more information on how to set credentials, see
<a class="reference external" href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/setup-credentials.html">Set up AWS Credentials and Region for Development</a>.</p>
<p>To store artifacts in a custom endpoint, set the <code class="docutils literal"><span class="pre">MLFLOW_S3_ENDPOINT_URL</span></code> to your endpoint’s URL.
For example, if you have a Minio server at 1.2.3.4 on port 9000:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">MLFLOW_S3_ENDPOINT_URL</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">1.2</span><span class="o">.</span><span class="mf">3.4</span><span class="p">:</span><span class="mi">9000</span>
</pre></div>
</div>
</div>
<div class="section" id="azure-blob-storage">
<h5>Azure Blob Storage<a class="headerlink" href="#azure-blob-storage" title="Permalink to this headline"> </a></h5>
<p>To store artifacts in Azure Blob Storage, specify a URI of the form
<code class="docutils literal"><span class="pre">wasbs://&lt;container&gt;&#64;&lt;storage-account&gt;.blob.core.windows.net/&lt;path&gt;</span></code>.
MLflow expects Azure Storage access credentials in the
<code class="docutils literal"><span class="pre">AZURE_STORAGE_CONNECTION_STRING</span></code> or <code class="docutils literal"><span class="pre">AZURE_STORAGE_ACCESS_KEY</span></code> environment variables (preferring
a connection string if one is set), so you will need to set one of these variables on both your client
application and your MLflow tracking server. Finally, you will need to <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">azure-storage</span></code>
separately (on both your client and the server) to access Azure Blob Storage; MLflow does not declare
a dependency on this package by default.</p>
</div>
<div class="section" id="google-cloud-storage">
<h5>Google Cloud Storage<a class="headerlink" href="#google-cloud-storage" title="Permalink to this headline"> </a></h5>
<p>To store artifacts in Google Cloud Storage, specify a URI of the form <code class="docutils literal"><span class="pre">gs://&lt;bucket&gt;/&lt;path&gt;</span></code>.
You should configure credentials for accessing the GCS container on the client and server as described
in the <a class="reference external" href="https://google-cloud.readthedocs.io/en/latest/core/auth.html">GCS documentation</a>.
Finally, you will need to <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">google-cloud-storage</span></code> (on both your client and the server)
to access Google Cloud Storage; MLflow does not declare a dependency on this package by default.</p>
<p>FTP server
~~~
Specify a URI of the form <a class="reference external" href="ftp://user&#64;host/path/to/directory">ftp://user&#64;host/path/to/directory</a> to store artifacts in a FTP server.
The URI may optionally include a password for logging into the server, e.g. <code class="docutils literal"><span class="pre">ftp://user:pass&#64;host/path/to/directory</span></code></p>
</div>
<div class="section" id="sftp-server">
<h5>SFTP Server<a class="headerlink" href="#sftp-server" title="Permalink to this headline"> </a></h5>
<p>To store artifacts in an SFTP server, specify a URI of the form <code class="docutils literal"><span class="pre">sftp://user&#64;host/path/to/directory</span></code>.
You should configure the client to be able to log in to the SFTP server without a password over SSH (e.g. public key, identity file in ssh_config, etc.).</p>
<p>The format <code class="docutils literal"><span class="pre">sftp://user:pass&#64;host/</span></code> is supported for logging in. However, for safety reasons this is not recommended.</p>
<p>When using this store, <code class="docutils literal"><span class="pre">pysftp</span></code> must be installed on both the server and the client. Run <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pysftp</span></code> to install the required package.</p>
</div>
<div class="section" id="nfs">
<h5>NFS<a class="headerlink" href="#nfs" title="Permalink to this headline"> </a></h5>
<p>To store artifacts in an NFS mount, specify a URI as a normal file system path, e.g., <code class="docutils literal"><span class="pre">/mnt/nfs</span></code>.
This path must the same on both the server and the client – you may need to use symlinks or remount
the client in order to enforce this property.</p>
</div>
</div>
</div>
<div class="section" id="networking">
<h3><a class="toc-backref" href="#id19">Networking</a><a class="headerlink" href="#networking" title="Permalink to this headline"> </a></h3>
<p>The <code class="docutils literal"><span class="pre">--host</span></code> option exposes the service on all interfaces. If running a server in production, we
would recommend not exposing the built-in server broadly (as it is unauthenticated and unencrypted),
and instead putting it behind a reverse proxy like NGINX or Apache httpd, or connecting over VPN.
Additionally, you should ensure that the <code class="docutils literal"><span class="pre">--file-store</span></code> (which defaults to the <code class="docutils literal"><span class="pre">./mlruns</span></code> directory)
points to a persistent (non-ephemeral) disk.</p>
</div>
<div class="section" id="logging-to-a-tracking-server">
<h3><a class="toc-backref" href="#id20">Logging to a Tracking Server</a><a class="headerlink" href="#logging-to-a-tracking-server" title="Permalink to this headline"> </a></h3>
<p>To log to a tracking server, set the <code class="docutils literal"><span class="pre">MLFLOW_TRACKING_URI</span></code> environment variable to the server’s URI,
along with its scheme and port (for example, <code class="docutils literal"><span class="pre">http://10.0.0.1:5000</span></code>) or call <a class="reference internal" href="python_api/mlflow.html#mlflow.set_tracking_uri" title="mlflow.set_tracking_uri"><code class="xref py py-func docutils literal"><span class="pre">mlflow.set_tracking_uri()</span></code></a>.</p>
<p>The <a class="reference internal" href="python_api/mlflow.html#mlflow.start_run" title="mlflow.start_run"><code class="xref py py-func docutils literal"><span class="pre">mlflow.start_run()</span></code></a>, <a class="reference internal" href="python_api/mlflow.html#mlflow.log_param" title="mlflow.log_param"><code class="xref py py-func docutils literal"><span class="pre">mlflow.log_param()</span></code></a>, and <a class="reference internal" href="python_api/mlflow.html#mlflow.log_metric" title="mlflow.log_metric"><code class="xref py py-func docutils literal"><span class="pre">mlflow.log_metric()</span></code></a> calls
then make API requests to your remote tracking server.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow</span>
<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">():</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">log_param</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">log_metric</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


              </div>
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="concepts.html" class="btn btn-neutral" title="Concepts" accesskey="p"><span class="db-icon db-icon-chevron-left"></span> Previous</a>
      
      
        <a href="projects.html" class="btn btn-neutral" title="MLflow Projects" accesskey="n">Next <span class="db-icon db-icon-chevron-right"></span></a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2018. All rights reserved.
      </p>

  </div> 

</footer>
          </div>
        </div>
      </section>
    </main>
  </page>

  


  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:'./',
      VERSION:'0.8.1',
      COLLAPSE_INDEX:false,
      FILE_SUFFIX:'.html',
      HAS_SOURCE:  true
    };
  </script>
  <script type="text/javascript" src="_static/jquery.js"></script>
  <script type="text/javascript" src="_static/underscore.js"></script>
  <script type="text/javascript" src="_static/doctools.js"></script>
  <script type="text/javascript" src="_static/languagesections.js"></script>
  

  <script type="text/javascript" src="_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="_static/js/jquery.waypoints.min.js"></script>

  
  
  
  <script type="text/javascript">var CLIPPY_SVG_PATH = "_static/clippy.svg";</script>
  <script type="text/javascript" src="_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44077918-9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-44077918-9');
</script>


  
    <!-- Algolia Search -->
    <script type="text/javascript">
      var algoliaConfigs = {
        key: 'b6d79a1058f2b3c1ee03bf659ade5a4b',
        index: 'mlflow',
      };
    </script>
    <div id="algolia-wrapper"></div>
    <script src="_static/js/tether.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  
</body>
</html>