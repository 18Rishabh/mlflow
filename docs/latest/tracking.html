

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MLflow Tracking &mdash; MLflow 0.0.1.dev0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MLflow Projects" href="projects.html" />
    <link rel="prev" title="Concepts" href="concepts.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> MLflow
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1.dev0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MLflow Tracking</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#concepts">Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#where-runs-get-recorded">Where Runs Get Recorded</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logging-data-to-runs">Logging Data to Runs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-logging-functions">Basic Logging Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging-large-artifacts">Logging Large Artifacts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#launching-multiple-runs-in-one-program">Launching Multiple Runs in One Program</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#organizing-runs-in-experiments">Organizing Runs in Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tracking-ui">Tracking UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#querying-runs-programmatically">Querying Runs Programmatically</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-a-tracking-server">Running a Tracking Server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">MLflow Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">MLflow Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_api/index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_api.html">REST API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MLflow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>MLflow Tracking</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mlflow-tracking">
<span id="tracking"></span><h1>MLflow Tracking<a class="headerlink" href="#mlflow-tracking" title="Permalink to this headline">¶</a></h1>
<p>The MLflow Tracking component lets you log and query experiments using either REST or Python.</p>
<div class="section" id="concepts">
<h2>Concepts<a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h2>
<p>MLflow Tracking is organized around the concept of <em>runs</em>, which are executions of some piece of
data science code. Each run records the following information:</p>
<dl class="docutils">
<dt>Code Version</dt>
<dd>Git commit used to execute the run, if it was executed from an <a class="reference internal" href="projects.html#projects"><span class="std std-ref">MLflow Project</span></a>.</dd>
<dt>Parameters</dt>
<dd>Key-value input parameters of your choice. Both keys and values are strings.</dd>
<dt>Metrics</dt>
<dd>Key-value metrics where the value is numeric. Each metric can be updated throughout the
course of the run (for example, to track how your model’s loss function is converging), and MLflow
will record and let you visualize the metric’s full history.</dd>
<dt>Artifacts</dt>
<dd>Output files in any format. For example, you can record images (for example, PNGs), models
(for example, a pickled SciKit-Learn model) or even data files (for example, a
<a class="reference external" href="https://parquet.apache.org/">Parquet</a> file) as artifacts.</dd>
</dl>
<p>Runs can be recorded from anywhere you run your code through MLflow’s Python or REST APIs: for
example, you can record them in a standalone program, on a remote cloud machine, or in an
interactive notebook. If you record runs in an <a class="reference internal" href="projects.html#projects"><span class="std std-ref">MLflow Project</span></a>, however, MLflow
remembers the project URI and source version.</p>
<p>Finally, runs can optionally be organized into <em>experiments</em>, which group together runs for a
specific task. You can set an experiment with <code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.set_experiment_id()</span></code> or the
corresponding REST parameters. The MLflow UI and API let you create and search for experiments.</p>
<p>Once your runs have been recorded, you can query them using the <a class="reference internal" href="#tracking-ui"><span class="std std-ref">Tracking UI</span></a> or the MLflow API.</p>
</div>
<div class="section" id="where-runs-get-recorded">
<h2>Where Runs Get Recorded<a class="headerlink" href="#where-runs-get-recorded" title="Permalink to this headline">¶</a></h2>
<p>MLflow runs can be recorded either locally in files or remotely to a Tracking Server.
By default, the MLflow Python API logs runs to files in an <code class="docutils literal notranslate"><span class="pre">mlruns</span></code> directory wherever you
ran your program. You can then run <code class="docutils literal notranslate"><span class="pre">mlflow</span> <span class="pre">ui</span></code> to see the logged runs. Set the
<code class="docutils literal notranslate"><span class="pre">MLFLOW_TRACKING_URI</span></code> environment variable to a server’s URI or call
<a class="reference internal" href="python_api/mlflow.html#mlflow.set_tracking_uri" title="mlflow.set_tracking_uri"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.set_tracking_uri()</span></code></a> to log runs remotely.</p>
<p>You can also <a class="reference internal" href="#tracking-server"><span class="std std-ref">run your own tracking server</span></a> to record runs.</p>
</div>
<div class="section" id="logging-data-to-runs">
<h2>Logging Data to Runs<a class="headerlink" href="#logging-data-to-runs" title="Permalink to this headline">¶</a></h2>
<p>You can log data to runs using either the MLflow REST API or the Python API. In this section, we
show the Python API, but there are corresponding REST APIs as well.</p>
<div class="section" id="basic-logging-functions">
<h3>Basic Logging Functions<a class="headerlink" href="#basic-logging-functions" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.set_tracking_uri" title="mlflow.set_tracking_uri"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.set_tracking_uri()</span></code></a> connects to a tracking URI. You can also set the
<cite>MLFLOW_TRACKING_URI</cite> environment variable to have MLflow find a URI from there. In both cases,
the URI can either be a HTTP/HTTPS URI for a remote server, or a local path to log data to a
directory. The URI defaults to <code class="docutils literal notranslate"><span class="pre">mlruns</span></code>.</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.create_experiment()</span></code> creates a new experiment and returns its ID. Runs can be
launched under the experiment by passing the experiment ID to <cite>mlflow.start_run</cite></p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.start_run" title="mlflow.start_run"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.start_run()</span></code></a> starts a new run and returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.tracking.Run</span></code>
object. You do not need to call <cite>start_run</cite> explicitly: calling one of the logging functions with
no active run will automatically start a new one.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.end_run" title="mlflow.end_run"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.end_run()</span></code></a> ends the currently active run, if any, taking an optional run status.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.active_run" title="mlflow.active_run"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.active_run()</span></code></a> returns the active Run object, if any.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.log_parameter" title="mlflow.log_parameter"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.log_parameter()</span></code></a> logs a key-value parameter in the currently active run. The keys and
values are both strings.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.log_metric" title="mlflow.log_metric"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.log_metric()</span></code></a> logs a key-value metric. The value must always be a number. MLflow will
remember the history of values for each metric.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.log_artifact" title="mlflow.log_artifact"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.log_artifact()</span></code></a> logs a local file as an artifact, optionally taking an
<code class="docutils literal notranslate"><span class="pre">artifact_path</span></code> to place it in within the run’s artifacts. Run artifacts can be organized into
directories, so you can place the artifact in a directory this way.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.log_artifacts" title="mlflow.log_artifacts"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.log_artifacts()</span></code></a> logs all the files in a given directory as artifacts, again taking
an optional <code class="docutils literal notranslate"><span class="pre">artifact_path</span></code>.</p>
<p><a class="reference internal" href="python_api/mlflow.html#mlflow.get_artifact_uri" title="mlflow.get_artifact_uri"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.get_artifact_uri()</span></code></a> returns the URI that artifacts from the current run should be
logged to, which can potentially be a distributed storage system URI (for example, <code class="docutils literal notranslate"><span class="pre">s3://</span></code> or
<code class="docutils literal notranslate"><span class="pre">dbfs://</span></code>). If your application supports writing to such URIs (for example, when using Apache Spark), it
can write artifacts directly to distributed storage this way.</p>
</div>
<div class="section" id="logging-large-artifacts">
<h3>Logging Large Artifacts<a class="headerlink" href="#logging-large-artifacts" title="Permalink to this headline">¶</a></h3>
<p>Although many artifacts you might log in MLflow are small files, it is also possible and use MLflow
to record large datasets, such as a computed feature. In this case, we recommend using
<a class="reference internal" href="python_api/mlflow.html#mlflow.get_artifact_uri" title="mlflow.get_artifact_uri"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.get_artifact_uri()</span></code></a> to write data directly to a distributed storage system, without
having to stream it through an MLflow server. MLflow currently only supports <code class="docutils literal notranslate"><span class="pre">s3://</span></code> and
<code class="docutils literal notranslate"><span class="pre">dbfs://</span></code> URIs, and is designed to provide artifact paths compatible with
<a class="reference external" href="https://spark.apache.org">Apache Spark</a> and
<a class="reference external" href="https://databricks.com/product/databricks-runtime">Databricks Runtime</a> so that you can use Spark
APIs to read and write distributed files directly. We recommend the
<a class="reference external" href="https://parquet.apache.org">Apache Parquet</a> format for large tabular datasets, as many data
science tools can read it.</p>
</div>
<div class="section" id="launching-multiple-runs-in-one-program">
<h3>Launching Multiple Runs in One Program<a class="headerlink" href="#launching-multiple-runs-in-one-program" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you want to execute multiple MLflow runs in the same program: for example, maybe you are
performing a hyperparameter search locally or your experiments are just very fast to run. This is
easy to do because the Run object returned by <a class="reference internal" href="python_api/mlflow.html#mlflow.start_run" title="mlflow.start_run"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.start_run()</span></code></a> is a Python
<a class="reference external" href="https://docs.python.org/2.5/whatsnew/pep-343.html">context manager</a>. You can “scope” each run to
just one block of code as follows:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">():</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">log_parameter</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">mlflow</span><span class="o">.</span><span class="n">log_metric</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The run will remain open throughout the <code class="docutils literal notranslate"><span class="pre">with</span></code> statement, and will automatically be closed when the
statement exits, even if it exits due to an exception.</p>
</div>
</div>
<div class="section" id="organizing-runs-in-experiments">
<h2>Organizing Runs in Experiments<a class="headerlink" href="#organizing-runs-in-experiments" title="Permalink to this headline">¶</a></h2>
<p><strong>TODO: Coming soon!</strong></p>
</div>
<div class="section" id="tracking-ui">
<span id="id1"></span><h2>Tracking UI<a class="headerlink" href="#tracking-ui" title="Permalink to this headline">¶</a></h2>
<p>The Tracking UI lets you visualize, search and compare runs, as well as download run artifacts or
metadata for analysis in other tools. If you have been logging runs to a local <code class="docutils literal notranslate"><span class="pre">mlruns</span></code> directory,
simply run <code class="docutils literal notranslate"><span class="pre">mlflow</span> <span class="pre">ui</span></code> in the directory above it, and it will load the corresponding runs.
Alternatively, the <a class="reference internal" href="#tracking-server"><span class="std std-ref">MLflow server</span></a> serves the same UI.</p>
<p>The UI contains the following key features:</p>
<p><strong>TODO: Coming soon!</strong></p>
</div>
<div class="section" id="querying-runs-programmatically">
<span id="tracking-query-api"></span><h2>Querying Runs Programmatically<a class="headerlink" href="#querying-runs-programmatically" title="Permalink to this headline">¶</a></h2>
<p>All of the functions in the Tracking UI can be accessed programmatically through the
<a class="reference internal" href="python_api/mlflow.tracking.html#module-mlflow.tracking" title="mlflow.tracking"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mlflow.tracking</span></code></a> module and the REST API. This makes it easy to do several
common tasks:</p>
<ul class="simple">
<li>Query and compare runs using any data analysis tool of your choice, for example, <strong>pandas</strong>.</li>
<li>Determine the artifact URI for a run to feed some of its artifacts into a new run when executing
a workflow.</li>
<li>Load artifacts from past runs as <a class="reference internal" href="models.html#models"><span class="std std-ref">MLflow Models</span></a>.</li>
<li>Run automated parameter search algorithms, where you query the metrics from various runs to
submit new ones.</li>
</ul>
</div>
<div class="section" id="running-a-tracking-server">
<span id="tracking-server"></span><h2>Running a Tracking Server<a class="headerlink" href="#running-a-tracking-server" title="Permalink to this headline">¶</a></h2>
<p><strong>TODO: Coming soon!</strong></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="projects.html" class="btn btn-neutral float-right" title="MLflow Projects" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="concepts.html" class="btn btn-neutral" title="Concepts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Databricks 2018. All rights reserved.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1.dev0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>